{"ast":null,"code":"import _toConsumableArray from\"C:/Users/lenov/Desktop/WebSocket-ToDo-List/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/lenov/Desktop/WebSocket-ToDo-List/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import io from\"socket.io-client\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tasks=_useState2[0],setTasks=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),taskName=_useState4[0],setTaskName=_useState4[1];var socketRef=useRef();useEffect(function(){var socket=io(\"http://localhost:8000\");socketRef.current=socket;// Listen for updates from the server\nsocket.on(\"updateData\",setTasks);socket.on(\"addTask\",function(newTask){return setTasks(function(tasks){return[].concat(_toConsumableArray(tasks),[newTask]);});});socket.on(\"removeTask\",function(id){return setTasks(function(tasks){return tasks.filter(function(task){return task.id!==id;});});});return function(){socket.disconnect();};},[]);var handleSubmit=function handleSubmit(event){event.preventDefault();if(!taskName){return;}var newTask={id:Date.now(),description:taskName};setTasks(function(tasks){return[].concat(_toConsumableArray(tasks),[newTask]);});socketRef.current.emit(\"addTask\",newTask);setTaskName(\"\");};var handleInputChange=function handleInputChange(event){setTaskName(event.target.value);};var removeTask=function removeTask(id){setTasks(function(tasks){return tasks.filter(function(task){return task.id!==id;});});socketRef.current.emit(\"removeTask\",id);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"ToDoList.app\"})}),/*#__PURE__*/_jsxs(\"section\",{className:\"tasks-section\",id:\"tasks-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tasks\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"tasks-section__list\",id:\"tasks-list\",children:tasks.map(function(task){return/*#__PURE__*/_jsxs(\"li\",{className:\"task\",children:[task.description,/*#__PURE__*/_jsx(\"button\",{className:\"btn btn--red\",onClick:function onClick(){return removeTask(task.id);},children:\"Remove\"})]},task.id);})}),/*#__PURE__*/_jsxs(\"form\",{id:\"add-task-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{className:\"text-input\",autoComplete:\"off\",type:\"text\",placeholder:\"Type your description\",id:\"task-name\",value:taskName,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"Add\"})]})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","io","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","tasks","setTasks","_useState3","_useState4","taskName","setTaskName","socketRef","socket","current","on","newTask","concat","_toConsumableArray","id","filter","task","disconnect","handleSubmit","event","preventDefault","Date","now","description","emit","handleInputChange","target","value","removeTask","className","children","map","onClick","onSubmit","autoComplete","type","placeholder","onChange"],"sources":["C:/Users/lenov/Desktop/WebSocket-ToDo-List/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport io from \"socket.io-client\";\n\nconst App = () => {\n  const [tasks, setTasks] = useState([]);\n  const [taskName, setTaskName] = useState(\"\");\n  const socketRef = useRef();\n\n  useEffect(() => {\n    const socket = io(\"http://localhost:8000\");\n    socketRef.current = socket;\n\n    // Listen for updates from the server\n    socket.on(\"updateData\", setTasks);\n    socket.on(\"addTask\", (newTask) => setTasks((tasks) => [...tasks, newTask]));\n    socket.on(\"removeTask\", (id) =>\n      setTasks((tasks) => tasks.filter((task) => task.id !== id))\n    );\n\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if (!taskName) {\n      return;\n    }\n    const newTask = { id: Date.now(), description: taskName };\n    setTasks((tasks) => [...tasks, newTask]);\n    socketRef.current.emit(\"addTask\", newTask);\n    setTaskName(\"\");\n  };\n\n  const handleInputChange = (event) => {\n    setTaskName(event.target.value);\n  };\n\n  const removeTask = (id) => {\n    setTasks((tasks) => tasks.filter((task) => task.id !== id));\n    socketRef.current.emit(\"removeTask\", id);\n  };\n\n  return (\n    <div className=\"App\">\n      <header>\n        <h1>ToDoList.app</h1>\n      </header>\n      <section className=\"tasks-section\" id=\"tasks-section\">\n        <h2>Tasks</h2>\n        <ul className=\"tasks-section__list\" id=\"tasks-list\">\n          {tasks.map((task) => (\n            <li className=\"task\" key={task.id}>\n              {task.description}\n              <button\n                className=\"btn btn--red\"\n                onClick={() => removeTask(task.id)}\n              >\n                Remove\n              </button>\n            </li>\n          ))}\n        </ul>\n        <form id=\"add-task-form\" onSubmit={handleSubmit}>\n          <input\n            className=\"text-input\"\n            autoComplete=\"off\"\n            type=\"text\"\n            placeholder=\"Type your description\"\n            id=\"task-name\"\n            value={taskName}\n            onChange={handleInputChange}\n          />\n          <button className=\"btn\" type=\"submit\">\n            Add\n          </button>\n        </form>\n      </section>\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}